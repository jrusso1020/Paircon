<% is_mobile = is_mobile_device? %>
<%= header_title 'Settings' %>

<div id="page-heading">
  <%= page_title 'Personal Settings' %>
  <hr />
</div>

<div class="container" id="main-container">
  <div class="row">
    <div class="col-md-3 col-sm-6 col-xs-12 col-md-offset-1">
      <div class="text-center">
        <h2 id="name" class="visible-xs-block">
          <%= @user.full_name %>
          <%= link_to_modal icon_text('pencil', 'Edit'), edit_user_path(@user.id), :class => 'btn btn-sm btn-borderless btn-inactive ' %>
        </h2>

        <div class="profile-image dropzone " data-width="300" data-ghost="false"
             data-canvas="false" data-originalsize="false" data-height="300"
             data-url="/users/<%= current_user.id %>/save_logo" data-image="<%= asset_path(current_user.profile_photo) %>"
             data-removeurl="/users/<%= current_user.id %>/destroy_logo">
          <input class="invisible" id="profile-image-upload" type="file" name="thumb" accept="image/*"/>
        </div>

        <% if !is_mobile %>
            <div>
              <button id="upload_image_btn" style="margin-top: 20px; margin-bottom: 20px;" class="btn btn-paircon btn-label btn-profile btn-padding">
                <i class="fa fa-upload"></i> Upload Image
              </button>
            </div>
        <% end %>
      </div>
    </div>
    <div class="col-md-3 col-sm-6 col-xs-12">
      <div class="row">
        <div class="col-md-12 col-sm-12 col-xs-12">
          <h2 id="name" class="hidden-xs">
            <%= @user.full_name %>
            <%= link_to_modal icon_text('pencil', "Edit"), edit_user_path(@user.id), :class => 'btn btn-sm btn-borderless btn-inactive ' %>
          </h2>
          <table class="table table-responsive pull-left">
            <tbody>
            <tr>
              <td class="profile-title table-accountinfo">Email Address:</td>
              <td class="table-accountinfo"><a href="<%= user_path(@user) %>"><%= @user.email %></a>
              </td>
            </tr>
            <tr>
              <td class="profile-title table-accountinfo">Phone Number:</td>
              <td class="table-accountinfo"><%= @user.phone_number.blank? ? 'N/A' : @user.phone_number %></td>
            </tr>
            <tr>
              <td class="profile-title table-accountinfo">Gender:</td>
              <td class="table-accountinfo"><%= @user.gender == 1 ? "Male" : "Female" %></td>
            </tr>

            </tbody>
          </table>
        </div>
      </div>

      <div class="row">
        <div class="col-md-12 col-sm-12 col-xs-12">
          <h3>Preferences</h3>
        </div>

        <div class="col-md-6 col-sm-6 col-xs-6">
          <h4>Account</h4>

          <div>
            <%= link_to_modal 'Delete Account', delete_user_path(current_user) %>
          </div>
        </div>
        <div class="col-md-6 col-sm-6 col-xs-6">
          <h4>Password</h4>

          <div><%= link_to_modal 'Change Password', password_reset_user_path(current_user) %></div>
        </div>
      </div>

    </div>
  </div>
</div>

<%= javascript_tag "initializeUserShow(#{@user.gender.to_i})" %>
