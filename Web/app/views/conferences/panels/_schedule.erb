<div class="x_panel">
  <div class="x_title">
    <h3>Schedule
      <ul class="nav navbar-right panel_toolbox">
        <% if @is_organizer %>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-plus"></i></a>
              <ul class="dropdown-menu" role="menu">
                <li><%= link_to_modal 'Add Auditorium', get_resource_schedules_path(conference_id: @conference.id, view: 'auditorium') %></li>
                <li><%= link_to_modal 'Add Room', get_resource_schedules_path(conference_id: @conference.id, view: 'room') %></li>
              </ul>
            </li>
        <% end %>
        <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a></li>
      </ul>
    </h3>

    <div class="clearfix"></div>
  </div>
  <div class="x_content">
    <div id='calendar'></div>
  </div>
</div>
<script>

    $(function () { // document ready

        $('#calendar').fullCalendar({
            schedulerLicenseKey: 'CC-Attribution-NonCommercial-NoDerivatives',
            now: '2017-04-07',
            editable: false,
            filterResourcesWithEvents: true,
            aspectRatio: 1.8,
            scrollTime: '00:00',
            header: {
                left: 'title',
                right: 'timelineDay,agendaDay,timelineNDays prev,next'
            },
            defaultView: 'timelineDay',
            views: {
                timelineNDays: {
                    type: 'timeline',
                    duration: {days: 3},
                    buttonText: 'Complete Event'
                },
                timelineDay: {
                    type: 'day',
                    buttonText: 'Day (Horizontal)'
                },
                agendaDay: {
                    type: 'agendaDay',
                    buttonText: 'Day (Vertical)'
                }
            },
            resourceRender: function (resource, cellEls) {
                <% if @is_organizer %>
                    cellEls.find('div:last').append('<a class="flex-grow" style="margin-right: 10px;" data-toggle="modal" data-target="#modal" data-backdrop="static" data-keyboard="false" href="' + '/schedules/delete_resource?id=' + resource.id + '"><i class="pull-right fa fa-trash"></i></a>')
                <% end %>
            },
            resourceGroupField: 'building',
            resources: [
                {id: 'a', building: '460 Bryant', title: 'Auditorium A'},
                {id: 'b', building: '460 Bryant', title: 'Auditorium B'},
                {id: 'c', building: '460 Bryant', title: 'Auditorium C', eventColor: 'orange'},
                {
                    id: 'd', building: '460 Bryant', title: 'Auditorium D', children: [
                    {id: 'd1', title: 'Room D1', occupancy: 10},
                    {id: 'd2', title: 'Room D2', occupancy: 10}]
                },
                {id: 'e', building: '460 Bryant', title: 'Auditorium E'},
                {id: 'f', building: '460 Bryant', title: 'Auditorium F', eventColor: 'red'},
                {id: 'g', building: '564 Pacific', title: 'Auditorium G'},
                {id: 'h', building: '564 Pacific', title: 'Auditorium H'},
                {id: 'i', building: '564 Pacific', title: 'Auditorium I'},
                {id: 'j', building: '564 Pacific', title: 'Auditorium J'},
                {id: 'k', building: '564 Pacific', title: 'Auditorium K'},
                {id: 'l', building: '564 Pacific', title: 'Auditorium L'},
                {id: 'm', building: '564 Pacific', title: 'Auditorium M'},
                {id: 'n', building: '564 Pacific', title: 'Auditorium N'},
                {id: 'o', building: '564 Pacific', title: 'Auditorium O'},
                {id: 'p', building: '564 Pacific', title: 'Auditorium P'},
                {id: 'q', building: '564 Pacific', title: 'Auditorium Q'},
                {id: 'r', building: '564 Pacific', title: 'Auditorium R'},
                {id: 's', building: '564 Pacific', title: 'Auditorium S'},
                {id: 't', building: '564 Pacific', title: 'Auditorium T'},
                {id: 'u', building: '564 Pacific', title: 'Auditorium U'},
                {id: 'v', building: '564 Pacific', title: 'Auditorium V'},
                {id: 'w', building: '564 Pacific', title: 'Auditorium W'},
                {id: 'x', building: '564 Pacific', title: 'Auditorium X'},
                {id: 'y', building: '564 Pacific', title: 'Auditorium Y'},
                {id: 'z', building: '564 Pacific', title: 'Auditorium Z'}
            ],
            events: [
                {id: '1', resourceId: 'b', start: '2017-04-07T02:00:00', end: '2017-04-07T07:00:00', title: 'event 1', color: 'blue'},
                {id: '2', resourceId: 'c', start: '2017-04-07T05:00:00', end: '2017-04-07T22:00:00', title: 'event 2', color: 'red'},
                {id: '3', resourceId: 'd1', start: '2017-04-06', end: '2017-04-08', title: 'event 3', color: 'green'},
                {id: '4', resourceId: 'e', start: '2017-04-07T03:00:00', end: '2017-04-07T08:00:00', title: 'event 4'},
                {id: '5', resourceId: 'f', start: '2017-04-07T00:30:00', end: '2017-04-07T02:30:00', title: 'event 5'}
            ]
        });

    });

</script>